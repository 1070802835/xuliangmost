<!DOCTYPE HTML>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<title>首页</title>
	<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all">
	<link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
	<script src="js/jquery-1.11.0.js"></script>
<!-- //end-smoth-scrolling -->
<script src="js/bootstrap.min.js"></script>
</head>
<body>
<!--header strat here-->
<div class="header">
	<div class="container">
		<div class="header-main">
			<div class="top-nav">
				<div class="content white">
	              <nav class="navbar navbar-default" role="navigation">
					    <div class="navbar-header">
					        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						        <span class="sr-only">Toggle navigation</span>
						        <span class="icon-bar"></span>
						        <span class="icon-bar"></span>
						        <span class="icon-bar"></span>
					        </button>
					        <div class="navbar-brand logo">
								<a href="index.html"><img src="images/logo1.png" alt=""></a>
							</div>
					    </div>
					    <!--/.navbar-header-->
					 <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					        <ul class="nav navbar-nav">
					        	   <li><a href="index.html">首页</a></li>
						             <li class="dropdown">
						        	<a href="#" class="dropdown-toggle" data-toggle="dropdown">男装 <b class="caret"></b></a>
						            <ul class="dropdown-menu multi-column columns-3">
							            <div class="row">
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-m.html">Accessories</a></li>
										            <li><a href="product-m.html">Bags</a></li>
										            <li><a href="product-m.html">Cap & Hats</a></li>
										            <li><a href="product-m.html">Tops</a></li>
										            <li><a href="product-m.html">Jackets & Coats</a></li>
										            <li><a href="product-m.html">wallets</a></li>
										            <li><a href="product-m.html">Jeans</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-m.html">Shirts</a></li>
										            <li><a href="product-m.html">Shoes,Boots</a></li>
										            <li><a href="product-m.html">Shorts</a></li>
										             <li><a href="product-m.html">Watches</a></li>
										            <li><a href="product-m.html">Sunglasses</a></li>
										             <li><a href="product-m.html">Bands</a></li>
										            <li><a href="product-m.html">Swimwear</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-m.html">Jewellery</a></li>
										            <li><a href="product-m.html">Jack & Jones</a></li>
										            <li><a href="product-m.html">Ray-Ban</a></li>
										             <li><a href="product-m.html">Lipsticks</a></li>
										            <li><a href="product-m.html">Longer wear</a></li>
										            <li><a href="product-m.html">sarees</a></li>
										            <li><a href="product-m.html">Nike</a></li>
									            </ul>
								            </div>
							            </div>
						            </ul>
						        </li>
						            <li class="dropdown">
						        	<a href="#" class="dropdown-toggle" data-toggle="dropdown">女装 <b class="caret"></b></a>
						            <ul class="dropdown-menu multi-column columns-3">
							            <div class="row">
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product.html">Accessories</a></li>
										            <li><a href="product.html">Bags</a></li>
										            <li><a href="product.html">Cap & Hats</a></li>
										            <li><a href="product.html">Tops</a></li>
										            <li><a href="product.html">Jackets & Coats</a></li>
										            <li><a href="product.html">wallets</a></li>
										            <li><a href="product.html">Jeans</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product.html">Shirts</a></li>
										            <li><a href="product.html">Shoes,Boots</a></li>
										            <li><a href="product.html">Shorts</a></li>
										             <li><a href="product.html">Watches</a></li>
										            <li><a href="product.html">Sunglasses</a></li>
										             <li><a href="product.html">Bands</a></li>
										            <li><a href="product.html">Swimwear</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product.html">Jewellery</a></li>
										            <li><a href="product.html">Jack & Jones</a></li>
										            <li><a href="product.html">Ray-Ban</a></li>
										             <li><a href="product.html">Lipsticks</a></li>
										            <li><a href="product.html">Longer wear</a></li>
										            <li><a href="product.html">sarees</a></li>
										            <li><a href="product.html">Nike</a></li>
									            </ul>
								            </div>
							            </div>
						            </ul>
						        </li>
						         <li class="dropdown">
						        	<a href="#" class="dropdown-toggle" data-toggle="dropdown">童装<b class="caret"></b></a>
						            <ul class="dropdown-menu multi-column columns-3">
							            <div class="row">
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-k.html">Accessories</a></li>
										            <li><a href="product-k.html">Bags</a></li>
										            <li><a href="product-k.html">Cap & Hats</a></li>
										            <li><a href="product-k.html">Tops</a></li>
										            <li><a href="product-k.html">Jackets & Coats</a></li>
										            <li><a href="product-k.html">wallets</a></li>
										            <li><a href="product-k.html">Jeans</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-k.html">Shirts</a></li>
										            <li><a href="product-k.html">Shoes,Boots</a></li>
										            <li><a href="product-k.html">Shorts</a></li>
										             <li><a href="product-k.html">Watches</a></li>
										            <li><a href="product-k.html">Sunglasses</a></li>
										             <li><a href="product-k.html">Bands</a></li>
										            <li><a href="product-k.html">Swimwear</a></li>
									            </ul>
								            </div>
								            <div class="col-sm-4">
									            <ul class="multi-column-dropdown">
										            <li><a href="product-k.html">Jewellery</a></li>
										            <li><a href="product-k.html">Jack & Jones</a></li>
										            <li><a href="product-k.html">Ray-Ban</a></li>
										             <li><a href="product-k.html">Lipsticks</a></li>
										            <li><a href="product-k.html">Longer wear</a></li>
										            <li><a href="product-k.html">sarees</a></li>
										            <li><a href="product-k.html">Nike</a></li>
									            </ul>
								            </div>
							            </div>
						            </ul>
						        </li>
						        <li><a href="contact.html">联系方式</a></li>
					        </ul>
					    </div>
					    <!--/.navbar-collapse-->
					</nav>
					<!--/.navbar-->
				</div>
			</div>
			<div class="header-right">
				<a href="cart.html" class="cart">我的购物车<span class="badge ml3">4</span></a>
			</div>
		 <div class="clearfix"> </div>
		</div>
	</div>
</div>
<!--header end here-->
<!--banner strat here-->
<div class="banner">
	<div class="container">
		<div class="banner-main js-hot-sale">
		</div>
		<script id="hot_sale" type="text/html">
			<div class="col-md-6 banner-left">
				<a href="single.html"><img src="{{imgres.large}}" alt="" class="img-responsive"></a>
			</div>
			<div class="col-md-6 banner-right simpleCart_shelfItem">
				<h2>{{type}}</h2>
				<h1>{{title}}</h1>
				<h5 class="item_price">${{price}}</h5>
				<ul class="bann-small-img">
					{{each style as value i}}
					<li><a href="single.html"><img src="images/MT_TYPE0{{i+1}}_60x76.jpg"></a></li>
					{{/each}}
				</ul>
				<h6>Size Charts</h6>
				<ul class="bann-btns">
				<li><select class="bann-size">
					<option>Size</option>
					{{each size as value i}}
					<option value="{{i}}">{{value}}</option>
					{{/each}}
				</select>
				</li>
				<li><a href="#" class="item_add btn" data-id="{{id}}">加入购物车</a></li>
               </ul>
			</div>
			<div class="clearfix"> </div>
		</script>
	</div>
</div>
<div class="product-list">
	
</div>
<script id="prodList" type="text/html">
	
	<div class="singlepage-product clearfix">

	{{each lists as value i}}
		   	 <div class="col-md-3 home-grid a{{i}}">
					<div class="home-product-main">
					   <div class="home-product-top">
					      <a href="#"><img src="{{value.imgres.medium}}" alt="" class="img-responsive zoom-img"></a>
					   </div>
						<div class="home-product-bottom">
								<a href="#" data-id="{{value.id}}" class="btn">加入购物车</a>					
						</div>
						<div class="srch">
							<span>${{value.price}}</span>
						</div>
					</div>
				 </div>
				 {{/each}}
		</div>
	   </script>
</div>
<div id="cookie"></div>
<div class="footer">
		  <div class="copy-rights">
		     <p>Copyright &copy; 2016 BJ-H5-1619 All rights reserved.<a target="_blank" href="">机试考核案例</a></p>
		   </div>
		</div>
	</div>
</div>
<!--footer end here-->
<script src="js/template.js"></script>
<script src="js/jquery.cookie.js"></script>
<script>
$(function(){
	$.get("js/product.json",function(data){
		var arr = [];
		$.each(data,function(){
			if(this.tag == "hot"){
				var hotData = this;
				var html = template("hot_sale",hotData);
//				console.log(hotData);
				$(".js-hot-sale").html(html);
			}else{
				arr.push(this);
			}
		});

		var prodListData={lists:arr};
		var html = template("prodList",prodListData);



		console.log(arr);




		$(".product-list").html(html);
		$(".home-product-top").click(function(){
			var curId = $(this).parent().find(".btn").attr("data-id");
			var curData = data[curId];
			var html = template("hot_sale",curData);
				$(".js-hot-sale").html(html);
				return false;
		});
		$(".badge").text($.cookie("total")||0);
		var obj = $.cookie("cart")?JSON.parse($.cookie("cart")):{};
		$(document).on("click",".btn",function(){
			var total = 0;
			var pId = $(this).attr("data-id");
			var num = obj[pId] || 0;
			obj[pId] = ++num;
			var str = JSON.stringify(obj);
			$.cookie("cart",str,{expires:7,path:"/"})
			var cookieObj = JSON.parse($.cookie("cart"));
			console.log(cookieObj)
			$.each(cookieObj, function(key,value) {
				total+=value;
			});
			$.cookie("total",total,{expires:7,path:"/"});
			$(".badge").text($.cookie("total"));
			return false;
		})
		var perWidth = $(".home-grid").outerWidth();
		$(".singlepage-product").width(perWidth*$(".home-grid").length);
		var timer = setInterval(move,3000);
		function move(){
			$(".singlepage-product .home-grid:first-child").animate({"margin-left":-perWidth},function(){
				$(this).css({"margin-left":0});
				$(this).appendTo(".singlepage-product");
			});
		}
		$(".home-grid").hover(function(){
			clearInterval(timer);
		},function(){
			timer = setInterval(move,3000);
		})
		
	})
})
	
</script>
</body>
		</html>