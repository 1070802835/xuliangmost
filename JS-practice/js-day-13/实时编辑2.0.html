<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style type="text/css">
		table {
			border-collapse: collapse;
		}
		
		td {
			width: 180px;
			height: 40px;
			border: 1px solid black;
		}
	</style>

	<body>
		<input type="text" name="t1" id="t1" />
		<input type="text" name="t2" id="t2" />
		<input type="button" name="b1" id="b1" value="生成" />
		<div id="div1"></div>
		<script type="text/javascript">
			var oT1 = document.getElementById("t1");
			var oT2 = document.getElementById("t2");
			var oB1 = document.getElementById("b1");
			var oDiv1 = document.getElementById("div1");
			var oTb = document.createElement("table");

			oB1.addEventListener("click", fn1, false)

			function fn1() {
				oTb.innerHTML = "";
				for(var i = 0; i < oT1.value; i++) {
					var oTr = document.createElement("tr");
					for(var k = 0; k < oT2.value; k++) {
						var oTd = document.createElement("td");
						oTr.appendChild(oTd);
					}
					oTb.appendChild(oTr);
					oDiv1.appendChild(oTb);
				}
			}

			oTb.addEventListener("click", fn2, false)

			function fn2(e) {
				if(e.target.nodeName.toLowerCase() == "td") {
					oT3 = document.createElement("input");
					oT3.setAttribute("type", "text");
					oT3.value = e.target.innerHTML;
					e.target.innerHTML = ""; //每次赋值完之后  要清空td里面的内容
					e.target.appendChild(oT3); //写完input的属性之后 才能添加到TD里面去，
					oT3.focus(); //然后再给焦点，focus
					oT3.addEventListener("blur", fn3, false)

					function fn3() {
						oT3.parentNode.innerHTML = oT3.value;
					}
				}

			}
			//			
			//			oTb.onclick=function(e){
			//				if(e.target.nodeName.toLowerCase()=="td"){
			//					oT3=document.createElement("input");
			//					oT3.setAttribute("type","text");
			//					oT3.value=e.target.innerHTML;			//完成版
			//					e.target.innerHTML="";
			//					e.target.appendChild(oT3);
			//					oT3.focus();
			//					oT3.onblur=function(){
			//						this.parentNode.innerHTML=this.value;
			//					}
			//					
			//				}
			//				
			//			}
		</script>

	</body>

</html>